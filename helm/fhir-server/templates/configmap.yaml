apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "fhir-server.fullname" . }}
  labels:
    {{- include "fhir-server.labels" . | nindent 4 }}
data:
  # Database configuration
  db.max.connections: {{ .Values.config.database.maxConnections | quote }}
  db.min.connections: {{ .Values.config.database.minConnections | quote }}
  db.connect.timeout: {{ .Values.config.database.connectTimeout | quote }}
  db.idle.timeout: {{ .Values.config.database.idleTimeout | quote }}

  # Server configuration
  server.host: {{ .Values.config.server.host | quote }}
  server.port: {{ .Values.config.server.port | quote }}

  # gRPC configuration
  grpc.host: {{ .Values.config.grpc.host | quote }}
  grpc.port: {{ .Values.config.grpc.port | quote }}
  grpc.tls.enabled: {{ .Values.config.grpc.tlsEnabled | quote }}

  # Logging configuration
  rust.log: {{ .Values.config.logging.level | quote }}
